# matlab-sandbox
[![Run MATLAB tests](https://github.com/dstansby/matlab-sandbox/actions/workflows/run_tests.yml/badge.svg)](https://github.com/dstansby/matlab-sandbox/actions/workflows/run_tests.yml)
[![codecov](https://codecov.io/gh/dstansby/matlab-sandbox/branch/main/graph/badge.svg?token=346NBCNNPY)](https://codecov.io/gh/dstansby/matlab-sandbox)
[![Documentation Status](https://readthedocs.org/projects/matlab-sandbox/badge/?version=latest)](https://matlab-sandbox.readthedocs.io/?badge=latest)

A sample MATLAB package with all the nuts and bolts needed for a nice open source package. The package source code is in [+mypackage](+mypackage).

## Tests
Example tests live in the [tests](tests) directory.
[run_tests.m](run_tests.m) contains a script to run the tests and generate code coverage.
To run tests locally use:
```bash
matlab -batch run_tests
```

The tests are run on GitHub actions - see [run_tests.yml](.github/workflows/run_tests.yml) for CI configuration. Code coverage is collected and uploaded to [codecov](https://about.codecov.io/).

## Docs
Documentation is automatically generated from MATLAB comments, e.g.
```matlab
function result = add_one(x)
    % ADD_ONE  Add one to values.
    %   ADD_ONE(X) returns the input values plus 1.
    %
    %   See also MEAN
    result = x + 1
end
```
The docstring format is taken from the [MATLAB docs on adding help for a program](https://uk.mathworks.com/help/matlab/matlab_prog/add-help-for-your-program.html).
The documentation is built using [sphinx](https://www.sphinx-doc.org), with documentation config and structure in [docs](docs).
It's automatically built using [readthedocs](https://readthedocs.org/projects/matlab-sandbox/).
API documentaiton is autogenerated using [sphinxcontrib-matlabldomain](https://github.com/sphinx-contrib/matlabdomain).


### Using markdown in the docs
Some people prefer to write documentation files using markdown instead of RestruturedText (rst, the sphinx default).
Unfortunately `sphinxcontrib-matlabdomain` is generates rst files, so they cannot be markdown.
The sphinx docs have a [guide to mixing markdown and rst](https://www.sphinx-doc.org/en/master/usage/markdown.html) that can be used to write the rest of the docs in markdown.
